<!DOCTYPE html>
<html>
  <head>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        var host = location.origin.replace(/^http/, 'ws');
        var ws = new WebSocket(host);

        ws.addEventListener('open', function (e) {
          var soundsXHR = new XMLHttpRequest();
          soundsXHR.open('GET', 'sounds.json', true);
          soundsXHR.onload = function () {
            var sounds = JSON.parse(soundsXHR.response);
            var buttonContainer = document.querySelector('#button-container');

            Object.keys(sounds).forEach(function (sound) {
              var button = document.createElement('button');
              button.className = '.sound-button';

              button.setAttribute('data-sound', sound);
              button.textContent = sounds[sound].name;

              button.onclick = function (e) {
                ws.send(JSON.stringify({'play': sound}));
              };

              buttonContainer.appendChild(button);
            });
          };

          soundsXHR.send();
        });
      });
    </script>
  </head>
  <body>
    <div id="button-container">
    </div>
  </body>
</html>